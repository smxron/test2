
{% block content %}
    <div class="container">
        <h2>
            {% if model.isNewRecord %}
                Создать контакт
            {% else %}
                Редактировать контакт: {{ model.firstName }} {{ model.lastName }}
            {% endif %}
        </h2>

        <form method="post" action="" class="form-horizontal">

            <div class="form-group">
                <label class="control-label col-md-2" for="contact-firstName">
                    Имя *
                </label>
                <div class="col-md-10">
                    <input
                            type="text"
                            id="contact-firstName"
                            name="Contact[firstName]"
                            value="{{ model.firstName }}"
                            class="form-control"
                            required
                    >
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-md-2" for="contact-lastName">
                    Фамилия
                </label>
                <div class="col-md-10">
                    <input
                            type="text"
                            id="contact-lastName"
                            name="Contact[lastName]"
                            value="{{ model.lastName }}"
                            class="form-control"
                    >
                </div>
            </div>

            <div class="form-group {{ errors.dealIds ? 'has-error' : '' }}">
                <label class="control-label col-md-2">
                    Сделки
                </label>
                <div class="col-md-10">
                    <div class="checkbox-list">
                        {% for deal in deals %}
                            <label class="checkbox-inline">
                                <input
                                        type="checkbox"
                                        name="Contact[dealIds][]"
                                        value="{{ deal.id }}"
                                        {{ deal.id in model.dealIds ? 'checked' : '' }}
                                >
                                {{ deal.name }}
                            </label>
                        {% else %}
                            <p class="text-muted">Нет доступных сделок</p>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <button type="submit" class="btn btn-primary">
                        {% if model.isNewRecord %}
                            Создать
                        {% else %}
                            Сохранить
                        {% endif %}
                    </button>
                    <a href="{{ path('site/index', {menu: 'contacts'}) }}" class="btn btn-default">
                        Отмена
                    </a>
                </div>
            </div>
        </form>
    </div>

    <style>
        .checkbox-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 4px;
            background: #f9f9f9;
        }
        .checkbox-inline {
            display: block;
            margin-bottom: 8px;
            padding: 5px;
            border-radius: 3px;
            transition: background-color 0.2s;
        }
        .checkbox-inline:hover {
            background-color: #f0f0f0;
        }
        .has-error .checkbox-list {
            border-color: #a94442;
        }
    </style>
{% endblock %}